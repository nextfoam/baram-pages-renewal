# 기본조건(General)

시간(Time), 중력(Gravity), 작동조건(Operating Conditions)을 설정한다.

<center><img src="https://github.com/nextfoam/baram-pages/raw/main/screenshots/pic/general.png" width="400" height="400"><br>기본조건 설정</center>

## 시간(Time)

정상상태(Steady) / 비정상상태(Transient)를 선택한다.

BaramFlow에서 유동, 열전달, 확학종 계산을 위한 솔버는 정상상태와 비정상상태 솔버가 따로 있어 선택에 따라 다른 솔버가 실행된다. 반면 다상유동은 비정상상태 계산을 위한 한가지 솔버를 사용한다. 상이 2개만 있는 경우, LTS(Local Time Step)을 시간 전진 기법으로 사용하여 정상상태 처럼 계산하며, **3개 이상의 상이 있거나 캐비테이션이 포함된 경우는 비정상상태 계산만 할 수 있다**.

## 중력(Gravity)

중력의 방향과 크기를 벡터로 설정한다.

밀도기반 솔버에서는 중력을 적용할 수 없어 이 부분이 비활성화 된다. 

다상유동의 경우 다른 상 간의 밀도차에 의한 부력을 계산하기 위해 중력을 반드시 포함해야 되는 경우가 많기 때문에, 사용자 오류를 줄이기 위해 프로그램을 시작할 때 중력 설정을 위한 별도의 창을 보여준다. 여기서의 설정은 주화면에서 수정할 수 있다.

단상유동 문제에서 자연대류에 의한 열전달을 고려해야 할 경우 중력을 고려해야 한다. 자연대류를 고려해야 하는지를 판단할 때, 리차드슨 수(Richardson Number, $Ri$)를 사용한다. 리자드슨 수는 그라쇼프 수(Grashof Number, $Gr$)와, 레이놀즈 수의 함수로 표현된다. 그라쇼프 수는 부력과 점성력의 비율이다.

<center>$Gr = \frac {\beta \Delta T L^3 g } {\nu^2}$</center>

$\beta$ : thermal expansion coefficient

$L$ : distance

$\nu$ : kinematic viscosity

<center>$Ri = \frac {Gr} {Re^2}$</center>

일반적으로 리차드슨 수가 0.1보다 작으면 자연대류를 무시해도 된다고 본다. 자연대류를 고려하지 않아도 되는 경우 계산의 안정성을 위해 중력은 (0 0 0)으로 설정하는 것이 좋다. 

## 작동조건(Operating Conditions)

작동압력(Operating Pressure)에서 기준 압력을 설정한다. **BaramFlow에서 사용하는 압력은 이 값을 기준으로하는 상대압력이다**. 이 값이 0이면 모든 압력은 절대압력이 된다. 밀도기반 솔버일 때는 이 값이 자동으로 0으로 설정되기 때문에 모든 입력은 절대압을 사용해야 한다.

OpenFOAM의 에너지방정식을 계산하는 솔버들은 상대압 개념 없이 절대압을 사용한다. 절대압은 $O(10^5)$ 정도로 크기 때문에 작은 압력변화를 계산할 때 효과적이지 않으며, 후처리 과정에서도 불편한 점이 많이 있다. 그래서 BaramFlow와 NextFOAM에서는 작동압력을 기준으로하는 상대압력을 사용한다.

BaramFlow의 압력기반 솔버들은 p\_rgh와 p라는 두 개의 압력 변수를 사용한다. p\_rgh는 압력에서 정수압을 뺀 값으로 작동압력에 대한 상대값을 사용하며 압력 방정식을 풀 때 이것을 사용한다. p는 계산에 사용되지는 않고 계산된 p\_rgh로부터 정수압을 포함한 값으로 얻어지며 절대압으로 나타난다. 밀도기반 솔버는 중력을 고려하지 않기 때문에 p만 사용한다.

